# 控制台、终端、命令行（CLI）和Shell
在**终端**（或控制台）的**命令行界面**中输入命令，然后**Shell**解释并执行这些命令，并将结果显示在终端中。

## 控制台
console 最初指物理设备，包括键盘、鼠标与显示器，而用户通过控制台与计算机**进行交互**。
在现代计算机中，尤其是在服务器领域，物理控制台仍然存在。但在个人电脑上，"控制台"的概念更多地被“终端”软件所取代，或特指直接连接到计算机的“主”终端。

## 终端
Terminal 是一个进行文本交互的**程序**，它提供了一个输入输出环境（窗口），可以在其中输入命令并查看输出。
作为一个程序，可以随意安装卸载，可以安装多个，并运行想运行的，而所有操作系统都安装了一个默认的终端：win 的 Windows Terminal， mac 的 Terminal 应用，而 Linux 发行版不同默认的终端也不同）。

## 命令行
Command Line Interface 是一种通过文本命令与计算机系统交互的用户界面。
大多数操作系统都有两种不同类型的界面， CLI 与 GUI （图形用户界面），前者通过**键入命令**执行任务，后者通过**图标、菜单和点击**执行任务。
终端或者说控制台提供了 CLI 的环境，而 CLI 是与计算机进行文本交互的通用概念。 Shell 是 CLI 的一个具体实现。

##  Shell
Shell 是是位于用户和操作系统内核之间的一层软件。它是一个**命令解释器**，负责解析用户输入的命令（通过 CLI ），并将其传递给操作系统内核执行。Shell 还负责处理命令的输出，并将其显示给用户。
与 Terminal 一样， Shell 是所有操作系统中的默认程序，也可以自主安装卸载，可以安装多个，并运行想运行的。而不同的 Shell 有不同的语法和特点，不同的操作系统可能默认安装的 Shell 也不同：win 的 PowerShell 还有 cmd.exe ， mac 的 Zsh 或者 Bash （旧版），而大多数 Linux 发行版用的是 Bash。
Shell 是真正“理解”并“执行”你输入的命令的程序，它提供了多种功能。
Shell 脚本语言是一种解释型语言，可将一系列命令（ CLI 中输入的）写入一个文本文件中，然后让 Shell 程序按照脚本内容执行，这就是 [[Shell 脚本]]。

# Using the shell
## 理解提示符（Prompt）
当启动终端时，会看到大致如下提示符：
```sh
missing@MiZoRe:~$
```
 - 通常格式是`username@hostname:current_director$`
 - `~`代表用户主目录
 - `$`代表普通用户，`#`代表 root 用户

## 引号的使用
 - **单引号（`'`）**：强引用，所有字符都**字面处理**，被当作普通文本。
 - **双引号（`"`）**：弱引用，变量/命令替换会被**解释**，算术会扩展为结果。
 - **反斜杠（`\`）**：用于**转义紧随其后的单个字符**（无论是否在引号内），使其失去特殊含义，被当作字面字符处理。

## $PATH 环境变量
Shell 通过查询`$PATH`环境变量来寻找程序进而执行。
```sh
missing:~$ echo $PATH
/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
missing:~$ which echo
/bin/echo
missing:~$ /bin/echo $PATH
/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
```
1. echo $PATH -- 查询 $PATH 环境变量中包含哪些目录。
2. which echo -- 在 $PATH 环境变量中查找指定的程序。并输出第一个匹配程序的完整路径。
3. /bin/echo $PATH -- 直接指定程序的完整路径来绕过 $PATH 的搜索机制，从而精确控制要执行的程序版本或位置。
---
为什么需要绕过`$PATH`？
- **执行当前目录的脚本或程序：** 出于安全考虑，当前目录通常不在 `$PATH` 中。因此，如果想执行当前目录下的脚本或程序，就必须使用 `./` 前缀。
- **执行特定版本的程序：** 如果系统上安装了同一个程序的多个版本（例如，不同的 Python 版本），可以通过指定完整路径来确保执行的是想要执行的版本。
- **执行未添加到 `$PATH` 的程序：** 有些程序可能不会自动将其可执行文件添加到 `$PATH` 中的目录，此时就需要手动指定它们的路径来运行。
---
- 临时添加: `export PATH="/new/path:$PATH"`
- 永久修改: 编辑 `~/.bashrc` 或 `~/.zshrc`

## `type`命令
`type` 命令比 `which` 命令**更全面**，因为它不仅仅查找可执行文件的路径，还会说明 Shell 如何解析和执行提供的命令，包括它是否是一个**别名、内建命令、函数或外部文件**。
- **语法：** `type [options] name [name ...]`
- **作用：** 显示 Shell 如何解释和查找指定的命令。
---
`type` 命令的输出类型
- **alias (别名)：** 用户为另一个命令或命令序列创建的快捷方式。
- **builtin (内建命令)：** Shell 自身提供的命令，不需要启动外部程序。这些命令直接由 Shell 解释执行，通常运行速度更快。
- **function (函数)：** 用户在 Shell 配置文件或脚本中定义的 Shell 函数。
- **file (文件/外部命令)：** 通过 `$PATH` 找到的可执行文件（二进制程序或脚本）。这是 `which` 命令主要查找的类型。
- **keyword (关键字)：** Shell 语言中的保留字，例如 `if`, `for`, `while` 等。

# Navigating in the shell
shell 中的路径是一组被分割的目录，在 Linux 和 macOS 上使用 `/` 分割，而在 Windows 上是 `\`。
以`/`（或Windows盘符如`C:\`）开头的为*绝对路径*，否则为*相对路径*。
在路径中，`.` 表示的是当前目录，而 `..` 表示上级目录。
## `cd`
```sh
missing:~$ pwd                           # 显示当前工作目录
/home/missing
missing:~$ cd /home                      # 切换目录
missing:/home$ pwd
/home
missing:/home$ cd ..                     # 切换到上级目录
missing:/$ pwd
/
missing:/$ cd ./home
missing:/home$ pwd
/home
missing:/home$ cd missing                # cd ## 切换到主目录（~）
missing:~$ pwd
/home/missing
missing:~$ ../../bin/echo hello
hello
```
## `ls`
```bash
ls               # 列出当前目录内容
ls /home         # 列出 /home 目录内容
ls -l            # 使用长列表格式显示
ls --help        # 查看 ls 命令的帮助
```
### `ls -l`
```sh
missing:~$ ls -l /home
total 20                   # 当前目录下所有文件（不包括子目录内容）的总大小
drwxr-xr-x 1 missing  users  4096 Jun 15  2019 missing
```
#### 1. 权限（Permissions） - 10个字符
这是最左边的第一列，由10个字符组成，用于描述文件类型和访问权限。
- **第一个字符：文件类型**
    - `-`：普通文件 (Regular file)
    - `d`：目录 (Directory)
    - `l`：符号链接 (Symbolic link)
    - `b`：块设备文件 (Block device file，如硬盘)
    - `c`：字符设备文件 (Character device file，如终端、打印机)
    - `p`：命名管道 (Named pipe / FIFO)
    - `s`：套接字文件 (Socket file)
- **接下来的9个字符：文件权限** 这9个字符分为三组，每组3个字符，分别代表**所有者 (owner)**、**所属组 (group)** 和**其他用户 (others)** 的权限：
    - **第一组 (字符 2-4)：所有者的权限**
        - `r`：读 (Read)
        - `w`：写 (Write)
        - `x`：执行 (Execute)。对于目录，`x` 表示可以进入该目录。
        - `-`：表示没有该权限
    - **第二组 (字符 5-7)：所属组的权限**
        - `r`：读
        - `w`：写
        - `x`：执行
        - `-`：表示没有该权限
    - **第三组 (字符 8-10)：其他用户的权限**
        - `r`：读
        - `w`：写
        - `x`：执行
        - `-`：表示没有该权限
    **特殊权限位：** 在 `x` 的位置有时可能会出现 `s` 或 `t`：
    - `s`：当出现在所有者或组的 `x` 位置时，表示 **SUID (Set User ID)** 或 **SGID (Set Group ID)**。
        - SUID：当执行一个具有 SUID 权限的文件时，它的执行权限将临时变为文件所有者的权限，而不是执行者的权限。
        - SGID：当执行一个具有 SGID 权限的文件时，它的执行权限将临时变为文件所属组的权限。对于目录，在该目录下创建的新文件或目录将继承父目录的组ID，而不是创建者的主组ID。
    - `t`：当出现在其他用户的 `x` 位置时，表示 **Sticky Bit**。
        - Sticky Bit (粘滞位)：通常用于共享目录（如 `/tmp`）。它意味着只有文件的所有者、目录的所有者或超级用户才能删除或重命名该目录下的文件，即使其他用户对该目录有写权限。
#### 2. 硬链接数（Number of Hard Links）
这一列显示了指向该文件（或目录）的**硬链接数量**。
- 对于文件，硬链接数表示有多少个文件名指向同一个 inode（文件内容）。
- 对于目录，硬链接数是 2 + 该目录下子目录的数量（因为每个子目录都有一个 `.` 和 `..` 硬链接）。
#### 3. 所有者（Owner）
显示文件的**所有者用户名**。
#### 4. 所属组（Group）
显示文件的**所属组名**。
#### 5. 文件大小（Size）
显示文件的大小，单位是**字节（bytes）**。
- 对于目录，这里显示的是目录元数据的大小，通常是 4096 字节。
#### 6. 最后修改时间（Last Modified Timestamp）
显示文件的**最后修改日期和时间**。
#### 7. 文件名（Filename）
显示文件或目录的**名称**。
- 如果文件是符号链接，通常会显示 `link_name -> target_file` 的格式。

### 常用选项
- `-a`: 显示所有 (包括隐藏)
- `-l`: 长列表格式
- `-h`: 人类可读大小 (需配合 -l)
- `-t`: 按时间排序
- `-r`: 反向排序
- `-R`: 递归列出

## `mv`

## `cp`

## `mkdir`
